datasource db {
  provider = "postgresql"
  url      = env("PG_CONNECTION_STRING")
}

generator client {
  provider = "prisma-client-js"
}

model TweeterAccount {
  id String @id @default(uuid())

  name  String  @unique
  Tweet Tweet[]
}

model Tweet {
  id        String @id @default(uuid())
  tweetId   String @unique
  tweetUrl  String  @unique

  text     String
  postedAt DateTime

  hasDisruption Boolean
  Disruption    Disruption?

  author   TweeterAccount @relation(fields: [authorId], references: [id])
  authorId String

  createdAt DateTime @default(now())
}

model Disruption {
  id           String  @id @default(uuid())
  tweet        Tweet   @relation(fields: [tweetId], references: [id])
  tweetId      String
  
  routeId      String
  start_date   DateTime
  end_date     DateTime
  cause        String
  effect       String
  severity     Int
  description  String
  
  wasProcessed Boolean
  createdAt DateTime @default(now())
}
